[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Aquatic Ecology Seminar Spring 2026",
    "section": "",
    "text": "Class Code\n  \n  \n    \n     Ohio EPA\n  \n\n  \n  \nThis seminar is designed as a collaborative, research-driven experience that mirrors the process of conducting and communicating science as a team. Together, we will develop a shared research question rooted in contemporary issues in aquatic ecology, analyze empirical datasets using R, and work collectively toward drafting a manuscript suitable for submission to a peer-reviewed journal.\n\n\n Fridays 9:30-10:30 AM in Research Center Rm 124. However, student-led meetings outside of class is encouraged.\nphoto by Isaac Szabo"
  },
  {
    "objectID": "index.html#about-the-instructors",
    "href": "index.html#about-the-instructors",
    "title": "Aquatic Ecology Seminar Spring 2026",
    "section": "About the Instructors",
    "text": "About the Instructors\n\nDr. Casey Pennock\n Dr. Casey Pennock is an aquatic ecologist with broad research interests spanning multiple levels of biological organization from populations to communities to ecosystems. They conduct research in a wide range of freshwater habitats, and are particularly interested in population and community dynamics and fish movement. They are interested in answering both basic and applied questions to inform conservation and management of freshwater ecosystems. Learn more about their research here.\n\n\nDr. Mack White\n Dr. Mack White is a broadly trained aquatic ecologist and postdoctoral research scientist at The Ohio State University. His research investigates how the direct and indirect effects of global change shape animal populations and communities, and how these changes propagate to influence nutrient cycling and energy flow. His research takes an integrative approach that uses a combination of field, experimental, modeling, and synthesis approaches to build predictive frameworks and provide a more holistic understanding of the natural world that informs conservation efforts, as well as ecological theory. Learn more about their research here"
  },
  {
    "objectID": "index.html#about-the-dataset",
    "href": "index.html#about-the-dataset",
    "title": "Aquatic Ecology Seminar Spring 2026",
    "section": "About the Dataset",
    "text": "About the Dataset\nOhio is defined by its abundant water resources, bordered by the Ohio River to the south and Lake Erie to the north. Together with thousands of miles of streams and rivers and extensive lakes and wetlands, these waters play a central role in supporting ecosystems, communities, and quality of life across the state. The Ohio Environmental Protection Agency’s Division of Surface Water oversees a wide range of monitoring and assessment programs spanning inland lakes, Lake Erie, headwater streams, rivers, and wetlands, as well as comprehensive watershed studies.\nEach year, Ohio EPA scientists survey approximately 400–450 stream and river sites statewide as part of these watershed assessments. Field crews collect chemical water samples, evaluate fish and aquatic macroinvertebrate communities, and measure physical characteristics of streams to assess overall condition. These efforts are guided by three primary goals: evaluating whether streams meet expectations outlined in Ohio’s Water Quality Standards, determining whether those expectations are appropriate and achievable, and identifying changes in stream condition since previous assessments.\nData from field surveys are analyzed and synthesized into biological and water quality reports, which inform both scientific understanding and management decisions. See Final 2024 integrated report here. Collectively, these assessments also underpin Ohio’s identification of impaired and threatened waters under Section 303(d) of the Clean Water Act.\nText adapted from materials produced by the Ohio Environmental Protection Agency."
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "Data",
    "section": "",
    "text": "This page serves as a repository to link publicly available data streams that are of interest to students and the larger analytically efforts of the class. Students, please treat this as a collaborative resource. If you bring a dataset to the class, please email the link/citation (with DOI or hyperlink) to Mack so he can add it here."
  },
  {
    "objectID": "data.html#databases-data-packages-and-data-papers",
    "href": "data.html#databases-data-packages-and-data-papers",
    "title": "Data",
    "section": "Databases, Data Packages, and Data Papers",
    "text": "Databases, Data Packages, and Data Papers\n\nTrait Data Packages\nFishLife\nrfishbase\n\n\nTrait Databases\nA database of lotic invertebrate traits for North America\nFishTraits: a database of ecological and life-history traits of freshwater fishes of the United States\n\n\nTrait Data Papers\nHopper, Garrett W., Jamie R. Bucholz, Traci P. DuBose, Kaelyn J. Fogelman, Sean M. Keogh, Megan E. Kubala, Matthew B. Lodato, et al. 2023. “A Trait Dataset for Freshwater Mussels of the United States of America.” Scientific Data 10 (1): 745.\nTwardochleb, Laura, Ethan Hiltner, Matthew Pyne, and Phoebe Zarnetske. 2021. “Freshwater Insects CONUS: A Database of Freshwater Insect Occurrences and Traits for the Contiguous United States.” Global Ecology and Biogeography: A Journal of Macroecology 30 (4): 826–41."
  },
  {
    "objectID": "literature.html",
    "href": "literature.html",
    "title": "Literature",
    "section": "",
    "text": "This page serves as a shared, living bibliography for the seminar. Mack will add citations for the papers discussed in and outside of class each week. The goal is to create a centralized set of references that captures key concepts and methods used in aquatic ecology - particularly those related to student’s interests.\nStudents, please treat this as a collaborative resource. If you bring a paper to the class, please email the citation (with DOI) to Mack so he can add it here."
  },
  {
    "objectID": "literature.html#foundational-papers",
    "href": "literature.html#foundational-papers",
    "title": "Literature",
    "section": "Foundational Papers",
    "text": "Foundational Papers\n\nLife History\nWinemiller, Kirk O., and Kenneth A. Rose. 1992. “Patterns of Life-History Diversification in North American Fishes: Implications for Population Regulation.” Canadian Journal of Fisheries and Aquatic Sciences 49 (10): 2196–2218.\nPerkin, Joshuah S., Natalie E. Knorp, Thomas C. Boersig, Amy E. Gebhard, Lucas A. Hix, and Thomas C. Johnson. 2017. “Life History Theory Predicts Long-Term Fish Assemblage Response to Stream Impoundment.” Canadian Journal of Fisheries and Aquatic Sciences 74 (2): 228–39.\nAtkinson, Carla L., Alex J. Franzen, Garrett W. Hopper, Jonathan W. Lopez, Zachery D. Zbinden, and Caryn C. Vaughn. 2025. “Environmental Gradients Drive Convergence in Life History Strategies among Disparate but Coevolved Taxonomic Groups.” Ecology 106 (12): e70273.\n\n\nNatural Flow Regime\nPoff, N. Leroy, J. David Allan, Mark B. Bain, James R. Karr, Karen L. Prestegaard, Brian D. Richter, Richard E. Sparks, and Julie C. Stromberg. 1997. “The Natural Flow Regime.” Bioscience 47 (11): 769–84.\nLytle, David A., and N. Leroy Poff. 2004. “Adaptation to Natural Flow Regimes.” Trends in Ecology & Evolution 19 (2): 94–100.\nPoff, N. Leroy, and Julie K. H. Zimmerman. 2010. “Ecological Responses to Altered Flow Regimes: A Literature Review to Inform the Science and Management of Environmental Flows: Review of Altered Flow Regimes.” Freshwater Biology 55 (1): 194–205.\n\n\nRiver Continuum Concept (RCC)\nVannote, Robin L., G. Wayne Minshall, Kenneth W. Cummins, James R. Sedell, and Colbert E. Cushing. 1980. “The River Continuum Concept.” Canadian Journal of Fisheries and Aquatic Sciences 37 (1): 130–37.\nDoretto, Alberto, Elena Piano, and Courtney E. Larson. 2020. “The River Continuum Concept: Lessons from the Past and Perspectives for the Future.” Canadian Journal of Fisheries and Aquatic Sciences 77 (11): 1853–64.\n\n\nRiver Ecosystem Synthesis (RES)\nThorp, James H., Martin C. Thoms, and Michael D. Delong. 2006. “The Riverine Ecosystem Synthesis: Biocomplexity in River Networks across Space and Time.” River Research and Applications 22 (2): 123–47.\nMaasri, Alain, James H. Thorp, Nicholas Kotlinski, Jens Kiesel, Bolortsetseg Erdenee, and Sonja C. Jähnig. 2021. “Variation in Macroinvertebrate Community Structure of Functional Process Zones along the River Continuum: New Elements for the Interpretation of the River Ecosystem Synthesis.” River Research and Applications 37 (4): 665–74.\nThorp, James H., Martin C. Thoms, Michael D. Delong, and Alain Maasri. 2023. “The Ecological Nature of Whole River Macrosystems: New Perspectives from the Riverine Ecosystem Synthesis.” Frontiers in Ecology and Evolution 11 (1184433): 1184433."
  },
  {
    "objectID": "literature.html#methodological-studies",
    "href": "literature.html#methodological-studies",
    "title": "Literature",
    "section": "Methodological Studies",
    "text": "Methodological Studies\n\nScale in Ecology\nLevin, Simon A. 1992. “The Problem of Pattern and Scale in Ecology: The Robert H. Macarthur Award Lecture.” Ecology 73 (6): 1943–67.\nCrossley, Michael S., Amanda R. Meier, Emily M. Baldwin, Lauren L. Berry, Leah C. Crenshaw, Glen L. Hartman, Doris Lagos-Kutz, et al. 2020. “No Net Insect Abundance and Diversity Declines across US Long Term Ecological Research Sites.” Nature Ecology & Evolution 4 (10): 1368–76.\n\n\nTrait-Based Ecology\nPoff, N. Leroy, Matthew I. Pyne, Brian P. Bledsoe, Christopher C. Cuhaciyan, and Daren M. Carlisle. 2010. “Developing Linkages between Species Traits and Multiscaled Environmental Variation to Explore Vulnerability of Stream Benthic Communities to Climate Change.” Journal of the North American Benthological Society 29 (4): 1441–58.\nMcLean, Matthew, David Mouillot, Martin Lindegren, Sébastien Villéger, Georg Engelhard, Juliette Murgier, and Arnaud Auber. 2019. “Fish Communities Diverge in Species but Converge in Traits over Three Decades of Warming.” Global Change Biology 25 (11): 3972–84.\nStreit, Robert P., and David R. Bellwood. 2023. “To Harness Traits for Ecology, Let’s Abandon ‘Functionality.’” Trends in Ecology & Evolution 38 (5): 402–11.\n\n\nSpace and Time\nRimmer, Langston L. H., Jacob F. Schaefer, and Melvin L. Warren. 2026. “Leveraging A Spatiotemporally Large Dataset to Test Predictions of Life History Theory in Stream Fish Communities.” Ecology of Freshwater Fish 35 (1): e70036.\nBaldigo, Barry P., Scott D. George, and Gregory B. Lawrence. 2025. “Fish-Assemblage and Water-Quality Recovery with Declining Acidic Deposition in Adirondack Mountain Streams, New York, USA.” Freshwater Science 44 (4): 443–62."
  },
  {
    "objectID": "code.html",
    "href": "code.html",
    "title": "Code",
    "section": "",
    "text": "This page houses a curated set of code examples designed to support students as they develop their own analytical frameworks. Rather than prescribing a single workflow, these examples introduce a range of R packages, functions, and approaches that students may, or may not be, accustomed to using in their own work. The goal is to expose students to different ways of working with data and to help them identify tools that are most appropriate for their research questions.\nStudents are encouraged to explore the code, modify it for their own purposes, and combine ideas across examples as their analyses. Code examples are grouped by theme (e.g., data retrieval, modeling, visualization)."
  },
  {
    "objectID": "code.html#data-retrieval",
    "href": "code.html#data-retrieval",
    "title": "Code",
    "section": "Data Retrieval",
    "text": "Data Retrieval\n\nGathering Hydrology Data\nBelow we showcase code that can be used to gather data from stream gauges maintained by the United States Geological Survey (USGS) using the dataRetrieval package. While some of you may be aware of (or even familiar with) the package, there are some relatively new (as of 11/2025) features outlined by USGS here.\nHousekeeping\nLoad necessary packages\nif you do not have librarian installed, you will need to install it first\n\n#install.packages('librarian')\nlibrarian::shelf(tidyverse, dataRetrieval, rnaturalearth)\n\nlibrarian() is nice because it automatically installs, updates, and attaches packages\nFirst, we will use the readNWISdata() in the dataRetrieval package to pull all stream flow (CFS, i.e., parameter code 00060) data for the state of Ohio - the default is daily average (i.e., stat code **00003* as seen in rename()). Check out the link to peruse all the parameter codes and their associated information\n\nsite_hydro &lt;- readNWISdata(stateCd = 'OH',\n                          parameterCd = '00060',\n                          startDate = '2023-12-01',\n                          endDate = '2023-12-31') |&gt; \n      janitor::clean_names() |&gt; \n      rename(flow_cfs = x_00060_00003,\n             date = date_time) |&gt;\n      mutate(year = year(date),\n             month = month(date),\n             day = day(date)) |&gt; \n      select(date, year, month, day, site_no, flow_cfs)\n\nGET:https://waterservices.usgs.gov/nwis/dv/?format=waterml%2C1.1&stateCd=OH&parameterCd=00060&startDT=2023-12-01&endDT=2023-12-31\n\n\nI generally despise capital letters in column names, so I usually clean them up using the clean_names() function in the janitor package. I also frequently use the glimpse() function to make sure my code is running as planned.\n\nglimpse(site_hydro)\n\nRows: 7,004\nColumns: 6\n$ date     &lt;dttm&gt; 2023-12-01, 2023-12-02, 2023-12-03, 2023-12-04, 2023-12-05, …\n$ year     &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n$ month    &lt;dbl&gt; 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 1…\n$ day      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ site_no  &lt;chr&gt; \"03090500\", \"03090500\", \"03090500\", \"03090500\", \"03090500\", \"…\n$ flow_cfs &lt;dbl&gt; 37.1, 36.1, 35.7, 35.4, 35.1, 33.5, 33.3, 44.7, 49.6, 199.0, …\n\n\nNext, we can pull out the distinct() sites to look up further metadata using the readNWISsite() function for each site_no\n\nsites &lt;- site_hydro |&gt; \n      distinct(site_no)\n\nsite_info &lt;- readNWISsite(siteNumbers = sites$site_no) |&gt; \n      select(site_no, station_nm, dec_lat_va, dec_long_va) |&gt; \n      rename(lat = dec_lat_va,\n             lon = dec_long_va,\n             river = station_nm) |&gt; \n      janitor::clean_names()\n\nGET:https://waterservices.usgs.gov/nwis/site/?siteOutput=Expanded&format=rdb&site=03090500,03091500,03092090,03092460,03093000,03094000,03094704,03095500,03098600,03098700,03099500,03109500,03110000,03111500,03111548,03113990,03114306,03115400,03115644,03115712,03115786,03115917,03116000,03116077,03116196,03117000,03117500,03118000,03118500,03120500,03121500,03124500,03125900,03126000,03126910,03127000,03128500,03129000,03129197,03131300,03136500,03139000,03140000,03140500,03141500,03141870,03142000,03144000,03144500,03144816,03145000,03145173,03145483,03145534,03146000,03146402,03146500,03149500,03150000,03150500,03156400,03157000,03157500,03159500,03159540,03202000,03205470,03216070,03217424,03217500,03219500,03219781,03220000,03221000,03221646,03223425,03225500,03226800,03227107,03227500,03228300,03228500,03228689,03228750,03228805,03229500,03229610,03229796,03230310,03230427,03230450,03230500,03230700,03230800,03231500,03232000,03232300,03232500,03234000,03234300,03234500,03237020,03237280,03237500,03238495,03240000,03241500,03244936,03245500,03246500,03247500,03255349,03255420,03259000,03260706,03261500,03261950,03262000,03262500,03262700,03263000,03264000,03265000,03266000,03266560,03267000,03267900,03269500,03270000,03270500,03271000,03271300,03271500,03271620,03272000,03272100,03272700,03274000,03322485,04177000,04177266,04178000,04180988,04181049,04183500,04183979,04184500,04185000,04185318,04185440,04185935,04186500,04187100,04188100,04188252,04188324,04188337,04188400,04188433,04188496,04189000,04189131,04189174,04189260,04190000,04191058,04191444,04191500,04192500,04192574,04192599,04193500,04193999,04195500,04195820,04196000,04196500,04196800,04197100,04197137,04197152,04197170,04198000,04199000,04199155,04199500,04200500,04201400,04201409,04201423,04201484,04201495,04201500,04201526,04202000,04203900,04206000,04206413,04206416,04206425,04206448,04207200,04208000,04208347,04208460,042085017,04208502,04208684,04208700,04208923,04209000,04212100,04213000,394653084072100,402913084285400,402958084363300,410014081362600,410051081594500,410121081330300,410433081312500,411607084241200,411610084240800,412141081412100,412325081415500,412453081395500,412624081450700\n\n\n\nglimpse(site_info)\n\nRows: 226\nColumns: 4\n$ site_no &lt;chr&gt; \"03090500\", \"03091500\", \"03092090\", \"03092460\", \"03093000\", \"0…\n$ river   &lt;chr&gt; \"Mahoning River bl Berlin Dam nr Berlin Center OH\", \"Mahoning …\n$ lat     &lt;dbl&gt; 41.04839, 41.13145, 41.16145, 41.15700, 41.26117, 41.23922, 41…\n$ lon     &lt;dbl&gt; -81.00120, -80.97120, -81.19705, -81.07176, -80.95426, -80.880…\n\n\nLastly, we can pull the site hydrology and spatial information together using a left_join() function.\n\nhydro &lt;- site_hydro |&gt; \n      left_join(site_info) |&gt; \n      mutate(year = year(date),\n             month = month(date),\n             day = day(date)) |&gt; \n      select(date, year, month, day, river, site_no, flow_cfs, lat, lon)\n\nJoining with `by = join_by(site_no)`\n\n\nFor those not familiar, left_join() is one of many join functions. I have attached a pretty robust introduction to these here. However, to be frank.. I rarely use anything other than left_join() (though see anti_join()), though I am certain there are reason to. Another good article here.\n\nglimpse(hydro)\n\nRows: 7,004\nColumns: 9\n$ date     &lt;dttm&gt; 2023-12-01, 2023-12-02, 2023-12-03, 2023-12-04, 2023-12-05, …\n$ year     &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n$ month    &lt;dbl&gt; 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 1…\n$ day      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ river    &lt;chr&gt; \"Mahoning River bl Berlin Dam nr Berlin Center OH\", \"Mahoning…\n$ site_no  &lt;chr&gt; \"03090500\", \"03090500\", \"03090500\", \"03090500\", \"03090500\", \"…\n$ flow_cfs &lt;dbl&gt; 37.1, 36.1, 35.7, 35.4, 35.1, 33.5, 33.3, 44.7, 49.6, 199.0, …\n$ lat      &lt;dbl&gt; 41.04839, 41.04839, 41.04839, 41.04839, 41.04839, 41.04839, 4…\n$ lon      &lt;dbl&gt; -81.0012, -81.0012, -81.0012, -81.0012, -81.0012, -81.0012, -…\n\n\nFor a look at the spatial distribution of gauges, lets do a quick plot\n\nhydro |&gt; \n      group_by(site_no, lat, lon) |&gt; \n      summarize(flow_m = mean(flow_cfs, na.rm = TRUE),\n                .groups = 'drop') |&gt; \n      ggplot(aes(x = lon, y = lat, color = log1p(flow_m))) +\n      borders(\"state\", regions = \"ohio\",\n              color = \"black\", linewidth = 0.6, fill = NA) +\n      geom_point(size = 3, alpha = 0.9) +\n      scale_color_viridis_c(option = \"magma\") +\n      theme_classic() + \n      labs(x = \"Longitude\", y = \"Latitude\",\n           color = 'log(Mean CFS)')\n\n\n\n\nFor those unfamiliar, the borders() function is very coarse, but good for a quick look like this\nNext, we will use the readNWISdv() in the dataRetrieval package to pull stream flow (CFS) data for a list of sites, as opposed to the entire state as done above\nFirst, we will create a list of sites with their site numbers. I have chose to use the tribble() function here. For those unfamiliar with tribble(), I have added some background information about tables, tibbles, and tribbles (oh my) here. When dealing with a lot of different sites it will be best to enter data into an excel document and read it in, however.\n\nsite_hydro &lt;- tribble(\n      ~river,                        ~siteNumber,  \n      \"Scioto-Columbus\",             \"03227500\",            \n      \"Maumuee-Defiance\",            \"04192500\",            \n      \"Little Muskingum-Bloomfield\", \"03115400\",            \n      \"Little Miami-Milford\",        \"03245500\",           \n      \"Hocking-Athens\",              \"03159500\",\n      \"Olentangy-Deleware\",          \"03225500\", \n)\n\nNow that we have our sites, it is time to pull the flow data (parameter code 00060) for all sites using the map() function in the purrr package. For those unaware, the map() function will change your left if you let it. Ditch the for loops and join us in the tidyverse. See video here for full explanation of the map() function, as well as map_dbl() and map_dfr() :)\n\nhydro &lt;- site_hydro |&gt; \n      mutate(\n            data = map(\n                  siteNumber, \n                  ~readNWISdv(\n                        siteNumbers = .x,\n                        parameterCd = '00060',\n                        startDate = '2023-12-01',\n                        endDate = '2023-12-31'\n                  )\n            )\n      ) |&gt; \n      dplyr::select(river, siteNumber, data) |&gt; \n      unnest(data) |&gt; \n      rename(flow_cfs = X_00060_00003, \n             date = Date) |&gt; \n      dplyr::select(river, flow_cfs, date) |&gt; \n      mutate(year = year(date),\n             month = month(date),\n             day = day(date)) |&gt; \n      dplyr::select(date, year, month, day,\n                    river, \n                    flow_cfs)\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03227500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=04192500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03115400&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03245500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03159500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03225500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nTake a quick glimpse to make sure all went as planned\n\nglimpse(hydro)\n\nRows: 186\nColumns: 6\n$ date     &lt;date&gt; 2023-12-01, 2023-12-02, 2023-12-03, 2023-12-04, 2023-12-05, …\n$ year     &lt;dbl&gt; 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2…\n$ month    &lt;dbl&gt; 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 1…\n$ day      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ river    &lt;chr&gt; \"Scioto-Columbus\", \"Scioto-Columbus\", \"Scioto-Columbus\", \"Sci…\n$ flow_cfs &lt;dbl&gt; 382, 327, 238, 229, 255, 279, 237, 227, 351, 530, 372, 783, 7…\n\n\nNext (and just for fun), I wanted to highlight how to use the map2() function, also maintained within the purrr package. Where map() iterates a function over a single vector or list, map2() iterates a function over (you guessed it) two vectors or lists.\nI have set everything up according to our first example below. However, in this example I want to pull flow and temperature data from these sites so I need to specify that in terms of parameter codes (i.e., site_params). I also need to make sure that flow and temperature data is retrieved for all sites (where available). To create a data frame with all unique combinations of site and parameter code, I used the crossing() function.\n\nsite_hydro &lt;- tribble(\n      ~river,                        ~siteNumber,  \n      \"Scioto-Columbus\",             \"03227500\",            \n      \"Maumuee-Defiance\",            \"04192500\",            \n      \"Little Muskingum-Bloomfield\", \"03115400\",            \n      \"Little Miami-Milford\",        \"03245500\",           \n      \"Hocking-Athens\",              \"03159500\",\n      \"Olentangy-Deleware\",          \"03225500\"\n)\n\nsite_params &lt;- tribble(\n      ~parameterCd, ~var,\n      '00060', 'FlowCFS',\n      '00010', 'WaterTempC'\n)\n\ncross &lt;- crossing(site_hydro, site_params)\n\n\nhydro_and_temp &lt;- cross |&gt; \n      mutate(data = map2(\n            siteNumber, \n            parameterCd,\n            ~readNWISdv(\n                  siteNumbers = .x,\n                  parameterCd = .y,\n                  startDate = \"2023-12-01\",\n                  endDate = \"2023-12-31\"\n            )\n      )) |&gt; \n      dplyr::select(river, siteNumber, parameterCd, var, data) |&gt; \n      unnest(data) |&gt; \n      rename(flow_cfs = X_00060_00003,\n             temp_c = X_00010_00003,\n             date = Date) |&gt; \n      mutate(year = year(date),\n             month = month(date),\n             day = day(date)) |&gt; \n      dplyr::select(date, year, month, day, river, flow_cfs, temp_c) |&gt; \n      pivot_longer(flow_cfs:temp_c, names_to = 'metric', values_to = 'value') |&gt; \n      na.omit() |&gt; \n      arrange(metric)\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03159500&format=waterml%2C1.1&ParameterCd=00010&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03159500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03245500&format=waterml%2C1.1&ParameterCd=00010&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03245500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03115400&format=waterml%2C1.1&ParameterCd=00010&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03115400&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=04192500&format=waterml%2C1.1&ParameterCd=00010&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=04192500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03225500&format=waterml%2C1.1&ParameterCd=00010&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03225500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03227500&format=waterml%2C1.1&ParameterCd=00010&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31\n\n\nGET:https://waterservices.usgs.gov/nwis/dv/?site=03227500&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2023-12-01&endDT=2023-12-31"
  },
  {
    "objectID": "code.html#data-wrangling",
    "href": "code.html#data-wrangling",
    "title": "Code",
    "section": "Data Wrangling",
    "text": "Data Wrangling\n\nLinking trait data\nBelow we showcase code that can be used to generate a ‘species’ list and link it to an existing trait dataset\nHousekeeping\nLoad necessary packages\nif you do not have librarian installed, you will need to install it first\n\n#install.packages('librarian')\nlibrarian::shelf(tidyverse, skimr)\n\nSimilar to above, I am using the tribble() and crossing() functions to generate simulate some data. I am coupling these functions with the rlnorm() function create an example count dataset of fishes commonly encountered in the state of Ohio\n\nspecies &lt;- tibble::tribble(\n      ~common_name,              ~family,            ~genus,        ~species,\n      \"Largemouth Bass\",         \"Centrarchidae\",    \"Micropterus\", \"salmoides\",\n      \"Smallmouth Bass\",         \"Centrarchidae\",    \"Micropterus\", \"dolomieu\",\n      \"Bluegill\",                \"Centrarchidae\",    \"Lepomis\",     \"macrochirus\",\n      \"Channel Catfish\",         \"Ictaluridae\",      \"Ictalurus\",   \"punctatus\",\n      \"Flathead Catfish\",        \"Ictaluridae\",      \"Pylodictis\",  \"olivaris\",\n      \"Common Carp\",             \"Cyprinidae\",       \"Cyprinus\",    \"carpio\",\n      \"Gizzard Shad\",            \"Clupeidae\",        \"Dorosoma\",    \"cepedianum\",\n      \"Emerald Shiner\",          \"Cyprinidae\",       \"Notropis\",    \"atherinoides\",\n      \"Creek Chub\",              \"Cyprinidae\",       \"Semotilus\",   \"atromaculatus\",\n      \"Logperch\",                \"Percidae\",         \"Percina\",     \"caprodes\"\n)\n\nsites &lt;- tribble(\n      ~river,                          \n      \"Scioto-Columbus\",                         \n      \"Maumuee-Defiance\",                      \n      \"Little Muskingum-Bloomfield\",           \n      \"Little Miami-Milford\",                   \n      \"Hocking-Athens\",             \n      \"Olentangy-Deleware\",         \n)\n\nyears &lt;- tibble(year = 2000:2025)\n\ndat &lt;- crossing(species, sites, years) |&gt; \n      select(year, river, common_name, family, genus, species) |&gt; \n      mutate(count = round(rlnorm(n(), meanlog = 1, sdlog = 1)))\n\n\nglimpse(dat)\n\nRows: 1,560\nColumns: 7\n$ year        &lt;int&gt; 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009…\n$ river       &lt;chr&gt; \"Hocking-Athens\", \"Hocking-Athens\", \"Hocking-Athens\", \"Hoc…\n$ common_name &lt;chr&gt; \"Bluegill\", \"Bluegill\", \"Bluegill\", \"Bluegill\", \"Bluegill\"…\n$ family      &lt;chr&gt; \"Centrarchidae\", \"Centrarchidae\", \"Centrarchidae\", \"Centra…\n$ genus       &lt;chr&gt; \"Lepomis\", \"Lepomis\", \"Lepomis\", \"Lepomis\", \"Lepomis\", \"Le…\n$ species     &lt;chr&gt; \"macrochirus\", \"macrochirus\", \"macrochirus\", \"macrochirus\"…\n$ count       &lt;dbl&gt; 4, 10, 1, 2, 10, 1, 17, 14, 3, 0, 5, 23, 4, 1, 6, 2, 10, 1…\n\n\nI am going to take a similar approach to generate an example trait dataset\n\ntraits &lt;- tibble::tribble(\n      ~species,\n      ~max_length_mm, ~age_maturity_yr, ~longevity_yr, ~egg_size_mm,\n      ~mean_clutch_size, ~parental_care,\n      ~larval_growth_mm_mo, ~yoy_growth_mm_yr, ~adult_growth_mm_yr,\n      ~spawn_season_d,\n      \n      \"Largemouth Bass\",        600, 3.5, 14, 1.8, 120000, 3, 15, 120, 40, 90,\n      \"Smallmouth Bass\",        550, 4.0, 12, 2.0,  90000, 3, 14, 110, 38, 80,\n      \"Spotted Bass\",           500, 3.0, 11, 1.7,  85000, 3, 14, 105, 36, 85,\n      \"Bluegill\",               300, 2.0,  8, 1.2,  45000, 2, 18,  95, 32, 110,\n      \"Redear Sunfish\",         350, 2.5,  9, 1.4,  52000, 2, 17, 100, 33, 105,\n      \"Green Sunfish\",          280, 1.8,  7, 1.1,  40000, 2, 19,  90, 30, 115,\n      \n      \"Channel Catfish\",        800, 5.0, 18, 5.5,  18000, 5, 10,  85, 30, 60,\n      \"Flathead Catfish\",      1100, 6.0, 22, 6.2,   9000, 6,  9,  75, 28, 55,\n      \"Blue Catfish\",          1200, 6.5, 25, 6.0,  20000, 5,  9,  80, 29, 65,\n      \n      \"Common Carp\",           1000, 4.0, 20, 1.5, 250000, 0, 16, 130, 42, 120,\n      \"Grass Carp\",            1300, 5.0, 22, 1.6, 300000, 0, 15, 135, 45, 125,\n      \"Goldfish\",               400, 2.0, 10, 1.3, 100000, 0, 17, 110, 35, 115,\n      \n      \"Gizzard Shad\",           450, 2.0, 10, 1.1, 180000, 0, 20, 140, 48, 130,\n      \"Threadfin Shad\",         300, 1.5,  6, 0.9, 160000, 0, 22, 150, 50, 140,\n      \n      \"Emerald Shiner\",         120, 1.0,  4, 0.9,  12000, 0, 25, 160, 55, 100,\n      \"Sand Shiner\",            140, 1.2,  5, 1.0,  15000, 0, 24, 155, 52, 105,\n      \"Creek Chub\",             220, 2.0,  6, 1.0,  25000, 1, 21, 145, 48, 110,\n      \"Bluntnose Minnow\",       110, 1.0,  3, 0.8,  10000, 0, 26, 165, 58, 95,\n      \n      \"Logperch\",               180, 2.5,  7, 1.3,  18000, 1, 18, 125, 40, 75,\n      \"Johnny Darter\",           90, 1.2,  4, 1.0,   8000, 1, 20, 135, 45, 70,\n      \"Yellow Perch\",           400, 3.0, 10, 2.1,  50000, 0, 16, 115, 37, 85,\n      \n      \"Freshwater Drum\",        700, 4.5, 16, 1.9, 200000, 0, 14, 105, 35, 95,\n      \"White Crappie\",          420, 3.0,  9, 1.6, 120000, 2, 17, 120, 38, 100,\n      \"Black Crappie\",          450, 3.2, 10, 1.7, 130000, 2, 16, 118, 37, 98\n)\n\n\nglimpse(traits)\n\nRows: 24\nColumns: 11\n$ species             &lt;chr&gt; \"Largemouth Bass\", \"Smallmouth Bass\", \"Spotted Bas…\n$ max_length_mm       &lt;dbl&gt; 600, 550, 500, 300, 350, 280, 800, 1100, 1200, 100…\n$ age_maturity_yr     &lt;dbl&gt; 3.5, 4.0, 3.0, 2.0, 2.5, 1.8, 5.0, 6.0, 6.5, 4.0, …\n$ longevity_yr        &lt;dbl&gt; 14, 12, 11, 8, 9, 7, 18, 22, 25, 20, 22, 10, 10, 6…\n$ egg_size_mm         &lt;dbl&gt; 1.8, 2.0, 1.7, 1.2, 1.4, 1.1, 5.5, 6.2, 6.0, 1.5, …\n$ mean_clutch_size    &lt;dbl&gt; 120000, 90000, 85000, 45000, 52000, 40000, 18000, …\n$ parental_care       &lt;dbl&gt; 3, 3, 3, 2, 2, 2, 5, 6, 5, 0, 0, 0, 0, 0, 0, 0, 1,…\n$ larval_growth_mm_mo &lt;dbl&gt; 15, 14, 14, 18, 17, 19, 10, 9, 9, 16, 15, 17, 20, …\n$ yoy_growth_mm_yr    &lt;dbl&gt; 120, 110, 105, 95, 100, 90, 85, 75, 80, 130, 135, …\n$ adult_growth_mm_yr  &lt;dbl&gt; 40, 38, 36, 32, 33, 30, 30, 28, 29, 42, 45, 35, 48…\n$ spawn_season_d      &lt;dbl&gt; 90, 80, 85, 110, 105, 115, 60, 55, 65, 120, 125, 1…\n\n\nThe first thing we will want to do is create a ‘species’ list. I put species in quotations, as we do not always have species-level information. All you need here is a dataset that includes all of the unique taxonomic identities present in your larger dataset\n\nspecies_list &lt;- dat |&gt; \n      dplyr::select(common_name, family, genus, species) |&gt; \n      distinct()\nprint(species_list)\n\n# A tibble: 10 × 4\n   common_name      family        genus       species      \n   &lt;chr&gt;            &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;        \n 1 Bluegill         Centrarchidae Lepomis     macrochirus  \n 2 Channel Catfish  Ictaluridae   Ictalurus   punctatus    \n 3 Common Carp      Cyprinidae    Cyprinus    carpio       \n 4 Creek Chub       Cyprinidae    Semotilus   atromaculatus\n 5 Emerald Shiner   Cyprinidae    Notropis    atherinoides \n 6 Flathead Catfish Ictaluridae   Pylodictis  olivaris     \n 7 Gizzard Shad     Clupeidae     Dorosoma    cepedianum   \n 8 Largemouth Bass  Centrarchidae Micropterus salmoides    \n 9 Logperch         Percidae      Percina     caprodes     \n10 Smallmouth Bass  Centrarchidae Micropterus dolomieu     \n\n\nNext, we link the trait data to our taxonomic data - ensure that you have a key column for which you can join the two discrete data streams (i.e., rename = species). If ‘key column’ is a new concept to you, please check out this article that does a great job discussing terminology and approaches to connecting data :)\n\ntraits &lt;- traits |&gt; \n      rename(common_name = species)\n\nspecies_traits &lt;- species_list |&gt; left_join(traits)\n\nJoining with `by = join_by(common_name)`\n\n\n\nglimpse(species_traits)\n\nRows: 10\nColumns: 14\n$ common_name         &lt;chr&gt; \"Bluegill\", \"Channel Catfish\", \"Common Carp\", \"Cre…\n$ family              &lt;chr&gt; \"Centrarchidae\", \"Ictaluridae\", \"Cyprinidae\", \"Cyp…\n$ genus               &lt;chr&gt; \"Lepomis\", \"Ictalurus\", \"Cyprinus\", \"Semotilus\", \"…\n$ species             &lt;chr&gt; \"macrochirus\", \"punctatus\", \"carpio\", \"atromaculat…\n$ max_length_mm       &lt;dbl&gt; 300, 800, 1000, 220, 120, 1100, 450, 600, 180, 550\n$ age_maturity_yr     &lt;dbl&gt; 2.0, 5.0, 4.0, 2.0, 1.0, 6.0, 2.0, 3.5, 2.5, 4.0\n$ longevity_yr        &lt;dbl&gt; 8, 18, 20, 6, 4, 22, 10, 14, 7, 12\n$ egg_size_mm         &lt;dbl&gt; 1.2, 5.5, 1.5, 1.0, 0.9, 6.2, 1.1, 1.8, 1.3, 2.0\n$ mean_clutch_size    &lt;dbl&gt; 45000, 18000, 250000, 25000, 12000, 9000, 180000, …\n$ parental_care       &lt;dbl&gt; 2, 5, 0, 1, 0, 6, 0, 3, 1, 3\n$ larval_growth_mm_mo &lt;dbl&gt; 18, 10, 16, 21, 25, 9, 20, 15, 18, 14\n$ yoy_growth_mm_yr    &lt;dbl&gt; 95, 85, 130, 145, 160, 75, 140, 120, 125, 110\n$ adult_growth_mm_yr  &lt;dbl&gt; 32, 30, 42, 48, 55, 28, 48, 40, 40, 38\n$ spawn_season_d      &lt;dbl&gt; 110, 60, 120, 110, 100, 55, 130, 90, 75, 80\n\nskimr::skim(species_traits)\n\n\nData summary\n\n\nName\nspecies_traits\n\n\nNumber of rows\n10\n\n\nNumber of columns\n14\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n4\n\n\nnumeric\n10\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\ncommon_name\n0\n1\n8\n16\n0\n10\n0\n\n\nfamily\n0\n1\n8\n13\n0\n5\n0\n\n\ngenus\n0\n1\n7\n11\n0\n9\n0\n\n\nspecies\n0\n1\n6\n13\n0\n10\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nmax_length_mm\n0\n1\n532.00\n344.80\n120.0\n240.00\n500.0\n750.00\n1.1e+03\n▇▂▃▂▃\n\n\nage_maturity_yr\n0\n1\n3.20\n1.57\n1.0\n2.00\n3.0\n4.00\n6.0e+00\n▇▂▆▂▂\n\n\nlongevity_yr\n0\n1\n12.10\n6.23\n4.0\n7.25\n11.0\n17.00\n2.2e+01\n▇▅▅▂▅\n\n\negg_size_mm\n0\n1\n2.25\n1.94\n0.9\n1.12\n1.4\n1.95\n6.2e+00\n▇▁▁▁▂\n\n\nmean_clutch_size\n0\n1\n76700.00\n83062.29\n9000.0\n18000.00\n35000.0\n112500.00\n2.5e+05\n▇▁▁▁▁\n\n\nparental_care\n0\n1\n2.10\n2.13\n0.0\n0.25\n1.5\n3.00\n6.0e+00\n▇▂▃▁▃\n\n\nlarval_growth_mm_mo\n0\n1\n16.60\n4.90\n9.0\n14.25\n17.0\n19.50\n2.5e+01\n▅▅▇▅▂\n\n\nyoy_growth_mm_yr\n0\n1\n118.50\n27.29\n75.0\n98.75\n122.5\n137.50\n1.6e+02\n▅▂▇▅▅\n\n\nadult_growth_mm_yr\n0\n1\n40.10\n8.62\n28.0\n33.50\n40.0\n46.50\n5.5e+01\n▇▂▇▅▂\n\n\nspawn_season_d\n0\n1\n93.00\n25.30\n55.0\n76.25\n95.0\n110.00\n1.3e+02\n▇▇▇▇▇\n\n\n\n\n\nIn addition to my usual glimpse(), you will notice I used the skim() function from the skimr package - super useful for a quick look at how data are distributed or if data are missing"
  }
]